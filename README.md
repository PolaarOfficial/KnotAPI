**This is a research project done by Alec Rulev**


# Purpose: Create an automated way to make a purchase on Amazon from signin to checking out
This can possibly be used a study case for agentic shopping


Prerequisites:
- Basic Solution
--Create an amazon account for testing
- MFA Solution
--Create an amazon account for testing
--Create a VOIP phone number with an API access (Using TWILIO in this case)


## 1) BASIC SOLUTION

Creating an amazon account does not require much, and the security level is relatively basic. Realistically, most Amazon clients utilize MFA for signin, but this particular solution provides a good guideline of how to 
-  login 
- search for an item 
- add an item to cart, and 
-  checkout.

Leveraging playwright for this was done for familiarity purposes, as well its debugging utility and speed. 

Initially we created a few Page Object Models to reflect the relevant locators and functionalities we would require on each page which are as follows:
Home Page,
Search Result Page,
Cart Page,
Checkout Page.

Some extra pages were included to handle extra features provided by Amazon, such as purchasing or declining an Amazon Prime membership.

## 2) MFA Solution

This solution was worked on first, until some roadblocks were hit, which resulted in the implementation of the basic solution. Lets assume that the set up is the same for MFA solution as it was for the basic solution. 

In the MFA solution, we are working with the problem of obtaining an OTP code generated by Amazon when a user attempts to login with 2FA enabled with their phone. In order to automate this process, we can leverage some tools such as Twilio, which provide virtual phone numbers, as well as an API to poll the phone numbers for their messages. 
>**Note**: OTP codes from Amazon arrive by short code message, and that requires a paid account on Twilio as well as an approved ticket for your virtual number to accept these messages. Currently, I am waiting for approval from Twilio's Customer Service, though there is chance Amazon might not allow VOIP phones to accept OTP codes.

An API that Twilio provides is as following to receive messages from the phone on your account: https://www.twilio.com/docs/messaging/api/message-resource#read-multiple-message-resources

Since we are not doing anything else with Twilio, other than polling for the messages, this is all that is necessary, and can be done by request, with no additional set up.

We can then pull in the OTP from GET request, and then leverage it in our login steps, in order to proceed with the Amazon shopping experience.

**Update**

**09/21/2025** Twilio requests confirmation of their short code abilities:
>However, we have recently added the ability to enable long code phone numbers on your Twilio account to receive these messages. I can help enable this, but first we have to get your consent and acknowledgement of these key details:
>>This feature, when enabled, will cause your account to receive incoming messages from short code numbers. The setting is account-wide and will affect all the long code numbers that belong to your Twilio account.
>>Short code numbers can only reach numbers from the same country as the short code. Therefore, you must ensure you're using a Twilio number from the same country as the short code, in order to receive messages. For example, if you are trying to receive messages from a Canada short code, you will need to use a Canada Twilio number.
>>Twilio cannot guarantee that every short code will be able to reach your Twilio number, even if the Twilio number is from the same country as the short code. There may be cases where a short code carrier does not have reach to Twilio; certain short code providers cannot reach some VoIP platforms. Some companies may also choose not to send to VoIP platforms. This is common with OTP messages from larger companies such as Apple, Microsoft, Google, Facebook, and WhatsApp.
>>You will not be able to send outbound messages from your Twilio numbers to short codes.

>Lastly, we need to get your confirmation that you have read and understand the following opt-out limitations with this feature from our legal team

I have confirmed.



## Usage with AGENTIC Shoppers
Current Idea:
See if it is possible to automate the deep link shopping flow:
- Create a deeplink to some random amazon product
- Hit the API link within the deeplink reference
- Leverage Playwright to go through the purchase process to simulate the normal human flow

Further research required:
Deep Link
https://developer.amazon.com/docs/reports-promo/deeplink-to-the-amazon-client.html
Product Search API
https://developer-docs.amazon.com/amazon-business/docs/product-search-api-v1-reference
https://webservices.amazon.com/paapi5/documentation/search-items.html
Checkout Session API
https://developer.amazon.com/docs/amazon-pay-api-v2/checkout-session.html

https://www.skilldrick.co.uk/2010/02/amazon-product-information-via-amazon-web-services/
https://stackoverflow.com/questions/1595624/amazon-products-api-looking-for-basic-overview-and-information

